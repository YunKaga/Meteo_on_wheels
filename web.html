<html><head><meta charset="utf-8"><title>Meteo Wheels</title>
            <style>button { width: 80px; height: 80px; font-size: 20px; margin: 5px; margin-bottom: 0px; margin-top: 0px;}</style>
            </head><body>
              <h2>–î–∞–Ω–Ω—ã–µ —Å –¥–∞—Ç—á–∏–∫–æ–≤:</h2>
              <pre id="data">{latest_data}</pre>
              <p>–û–±–Ω–æ–≤–ª–µ–Ω–æ: <span id="time">--</span></p>

              <div style="margin: 20px; margin-bottom: 60px;">
                <button onmousedown="send('CMD:5')" onmouseup="send('CMD:0')">‚ü≤ Q</button>
                <button onmousedown="send('CMD:F')" onmouseup="send('CMD:0')">‚¨ÜÔ∏é W</button>
                <button onmousedown="send('CMD:6')" onmouseup="send('CMD:0')">‚ü≥ E</button>
                <button disabled style="visibility: hidden;"></button>
                <button onmousedown="send('CMD:1')" onmouseup="send('CMD:0')">‚¨â R</button>
                <button onmousedown="send('CMD:3')" onmouseup="send('CMD:0')">‚¨à T</button>
                <br>
                <button onmousedown="send('CMD:L')" onmouseup="send('CMD:0')">‚¨ÖÔ∏é A</button>
                <button onmousedown="send('CMD:B')" onmouseup="send('CMD:0')">‚¨áÔ∏é S</button>
                <button onmousedown="send('CMD:R')" onmouseup="send('CMD:0')">‚û°Ô∏é D</button>
                <button disabled style="visibility: hidden;"></button>
                <button onmousedown="send('CMD:2')" onmouseup="send('CMD:0')">‚¨ã F</button>
                <button onmousedown="send('CMD:4')" onmouseup="send('CMD:0')">‚¨ä G</button>
                
              </div>
              <button onclick="send('SAVE_NOW')" style="font-size:18px; width: 240px;">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–π—á–∞—Å</button>

              <script>
                let KeyPressed = false;
                document.body.onkeydown = function keydown(event){
                  if (KeyPressed) return;
                  if (event.key == 'q') {send('CMD:5'); KeyPressed = true;}
                  else if (event.key == 'w') {send('CMD:F'); KeyPressed = true;}
                  else if (event.key == 'e') {send('CMD:6'); KeyPressed = true;}
                  else if (event.key == 'r') {send('CMD:1'); KeyPressed = true;}
                  else if (event.key == 't') {send('CMD:3'); KeyPressed = true;}
                  else if (event.key == 'a') {send('CMD:L'); KeyPressed = true;}
                  else if (event.key == 's') {send('CMD:B'); KeyPressed = true;}
                  else if (event.key == 'd') {send('CMD:R'); KeyPressed = true;}
                  else if (event.key == 'f') {send('CMD:2'); KeyPressed = true;}
                  else if (event.key == 'g') {send('CMD:4'); KeyPressed = true;}
                }
                document.body.onkeyup = function keyup(event){
                  if (KeyPressed) {send('CMD:0'); KeyPressed = false;}                  
                }

                function send(cmd) {
                  fetch('/cmd?c=' + encodeURIComponent(cmd));
                }
                function update() {
                  fetch('/data').then(r => r.text()).then(t => {
                    document.getElementById('data').innerText = t;
                    document.getElementById('time').innerText = new Date().toLocaleTimeString();
                  });
                }
                setInterval(update, 1000);
                update();
              </script>
            </body></html>