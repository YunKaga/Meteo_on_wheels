<html><head><meta charset="utf-8"><title>Meteo Wheels</title>
            <style>button { width: 80px; height: 80px; font-size: 20px; margin: 5px; margin-bottom: 0px; margin-top: 0px;}</style>
            </head><body>
              <h2>–î–∞–Ω–Ω—ã–µ —Å –¥–∞—Ç—á–∏–∫–æ–≤:</h2>
              <div>
                <p>–î–∞–≤–ª–µ–Ω–∏–µ: <span id="pressure">--</span> Pa</p>
                <p>–í–ª–∞–∂–Ω–æ—Å—Ç—å: <span id="humidity">--</span> %</p>
                <p>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: <span id="temperature">--</span> ¬∞C</p>
                <p>–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ: <span id="distance">--</span> cm</p>
              </div>
              <p>–û–±–Ω–æ–≤–ª–µ–Ω–æ: <span id="time">--</span></p>

              <div style="margin: 20px; margin-bottom: 60px;">
                <p style="font-size: 20px;">–°–∫–æ—Ä–æ—Å—Ç—å:
                  <input type="range" id="speed" min="100" max="250" step="10" value="150" style="width: 250px; margin-left: 20px; margin-right: 20px; accent-color: chartreuse;"/>
                <span id="speed_value">150</span> \ 250</p>
                <button onmousedown="send('CMD:5')" onmouseup="send('CMD:0')">‚ü≤ Q</button>
                <button onmousedown="send('CMD:F')" onmouseup="send('CMD:0')">‚¨ÜÔ∏é W</button>
                <button onmousedown="send('CMD:6')" onmouseup="send('CMD:0')">‚ü≥ E</button>
                <button disabled style="visibility: hidden;"></button>
                <button onmousedown="send('CMD:1')" onmouseup="send('CMD:0')">‚¨â R</button>
                <button onmousedown="send('CMD:3')" onmouseup="send('CMD:0')">‚¨à T</button>
                <br>
                <button onmousedown="send('CMD:L')" onmouseup="send('CMD:0')">‚¨ÖÔ∏é A</button>
                <button onmousedown="send('CMD:B')" onmouseup="send('CMD:0')">‚¨áÔ∏é S</button>
                <button onmousedown="send('CMD:R')" onmouseup="send('CMD:0')">‚û°Ô∏é D</button>
                <button disabled style="visibility: hidden;"></button>
                <button onmousedown="send('CMD:2')" onmouseup="send('CMD:0')">‚¨ã F</button>
                <button onmousedown="send('CMD:4')" onmouseup="send('CMD:0')">‚¨ä G</button>
                
              </div>
              <button onclick="send('SAVE_NOW')" style="font-size:18px; width: 240px;">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–π—á–∞—Å</button>

              <script>
                let KeyPressed = false;
                document.body.onkeydown = function keydown(event){
                  if (KeyPressed) return;
                  if (event.key == 'q') {send('CMD:5'); KeyPressed = true;}
                  else if (event.key == 'w') {send('CMD:F'); KeyPressed = true;}
                  else if (event.key == 'e') {send('CMD:6'); KeyPressed = true;}
                  else if (event.key == 'r') {send('CMD:1'); KeyPressed = true;}
                  else if (event.key == 't') {send('CMD:3'); KeyPressed = true;}
                  else if (event.key == 'a') {send('CMD:L'); KeyPressed = true;}
                  else if (event.key == 's') {send('CMD:B'); KeyPressed = true;}
                  else if (event.key == 'd') {send('CMD:R'); KeyPressed = true;}
                  else if (event.key == 'f') {send('CMD:2'); KeyPressed = true;}
                  else if (event.key == 'g') {send('CMD:4'); KeyPressed = true;}
                }
                document.body.onkeyup = function keyup(event){
                  if (KeyPressed) {send('CMD:0'); KeyPressed = false;}                  
                }

                document.getElementById('speed').addEventListener('input', function(event) {
                  document.getElementById("speed_value").innerText = this.value;
                });
                document.getElementById('speed').addEventListener('change', function(event) {
                  send('CMD:S' + this.value);
                });

                function send(cmd) {
                  fetch('/cmd?c=' + encodeURIComponent(cmd));
                }
                function update() {
                  fetch('/data').then(r => r.text()).then(t => {
                    document.getElementById('pressure').innerText = t.substring(0, t.indexOf(',')); t = t.substring(t.indexOf(',') + 1);
                    document.getElementById('humidity').innerText = t.substring(0, t.indexOf(',')); t = t.substring(t.indexOf(',') + 1);
                    document.getElementById('temperature').innerText = t.substring(0, t.indexOf(',')); t = t.substring(t.indexOf(',') + 1);
                    document.getElementById('distance').innerText = t;
                    document.getElementById('time').innerText = new Date().toLocaleTimeString();
                  });
                }
                setInterval(update, 1000);
                update();
              </script>
            </body></html>